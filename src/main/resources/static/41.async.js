(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{GDuS:function(e,a,t){e.exports={tableList:"antd-pro\\pages\\-admin\\-area-tableList",tableListOperator:"antd-pro\\pages\\-admin\\-area-tableListOperator",antCascaderPicker:"antd-pro\\pages\\-admin\\-area-antCascaderPicker",tableListForm:"antd-pro\\pages\\-admin\\-area-tableListForm",submitButtons:"antd-pro\\pages\\-admin\\-area-submitButtons"}},OXKR:function(e,a,t){"use strict";var l=t("xK3H"),n=t("3rQ3");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=l(t("dnxz"));t("fhlT");var d=l(t("kXZy"));t("v0Pg");var u=l(t("Byrh"));t("1pPU");var o=l(t("KjZ1"));t("fThj");var i=l(t("cYEd"));t("VfWj");var f=l(t("Otdh"));t("Ktq0");var c=l(t("fL5V"));t("XFd2");var s=l(t("33fr")),p=l(t("SeLb")),m=l(t("8g53"));t("/26P");var h=l(t("aYvq"));t("Lzml");var v=l(t("vpm+"));t("mKhK");var y=l(t("iW5v"));t("/MhY");var E=l(t("w0+5")),g=l(t("Sx57")),b=l(t("4zp0")),w=l(t("iVWQ")),C=l(t("lF+r")),k=l(t("PApH"));t("Q3sr");var S,V,z,x=l(t("9NP+")),T=n(t("zLBQ")),L=t("LneV"),O=l(t("CkN6")),R=l(t("zHco")),P=l(t("GDuS")),D=x.default.Item,F=function(e){function a(){var e,t;(0,g.default)(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return t=(0,w.default)(this,(e=(0,C.default)(a)).call.apply(e,[this].concat(n))),t.getItemsValue=function(){return t.props.form.getFieldsValue()},t}return(0,k.default)(a,e),(0,b.default)(a,[{key:"render",value:function(){var e=this.props,a=e.form.getFieldDecorator,t=e.handleSearch,l=e.loading;return T.default.createElement(x.default,{onSubmit:t,layout:"inline"},T.default.createElement(h.default,{gutter:{md:8,lg:24,xl:48}},T.default.createElement(y.default,{md:8,sm:24},T.default.createElement(D,{label:"\u4e0a\u7ea7\u7f16\u7801"},a("pcode")(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u7236\u7ea7\u7f16\u7801"})))),T.default.createElement(y.default,{md:8,sm:24},T.default.createElement(D,{label:"\u533a\u57df\u7f16\u7801"},a("code")(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u7f16\u7801"})))),T.default.createElement(y.default,{md:8,sm:24},T.default.createElement(D,{label:"\u533a\u57df\u540d\u79f0"},a("name")(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u540d\u79f0"})))),T.default.createElement(y.default,{md:8,sm:24},T.default.createElement(D,{label:"\u533a\u57df\u62fc\u97f3"},a("pinyin")(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u62fc\u97f3"})))),T.default.createElement(y.default,{md:8,sm:24},T.default.createElement(D,{label:"\u533a\u57df\u7b80\u62fc"},a("jianpin")(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u7b80\u62fc"})))),T.default.createElement(y.default,{md:8,sm:24},T.default.createElement("span",{className:P.default.submitButtons},T.default.createElement(v.default,{type:"primary",htmlType:"submit",loading:l},"\u67e5\u8be2")))))}}]),a}(T.default.Component),M=x.default.create()(F),I=(S=(0,L.connect)(function(e){var a=e.area,t=e.loading;return{area:a,loading:t.effects["area/fetch"],loading2:t.effects["area/saveOrUpdate"]}}),V=x.default.create(),S(z=V(z=function(e){function a(){var e,t;(0,g.default)(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return t=(0,w.default)(this,(e=(0,C.default)(a)).call.apply(e,[this].concat(n))),t.state={selectedRows:[],formValues:{},page:1,size:20},t.showModal=function(e){var a=t.props.dispatch;a({type:"area/showModel",payload:e})},t.handleSubmit=function(e){e.preventDefault();var a=t.props,l=a.dispatch,n=a.area.current,r=void 0===n?{}:n,d=a.form,u=t.state,o=u.page,i=u.size,f=u.formValues,c=r?r.key:"";d.validateFields(function(e,a){e||new Promise(function(e){l({type:"area/saveOrUpdate",payload:(0,p.default)({resolve:e,id:c},a)})}).then(function(e){if(200===e.code){var a=(0,p.default)({page:o,size:i},f);l({type:"area/fetch",payload:a})}})})},t.handleSearch=function(e){e.preventDefault();var a=t.props.dispatch,l=t.state.size,n=t.formRef.getItemsValue();t.setState({formValues:n,page:1});var r=(0,p.default)({page:1,size:l},n);a({type:"area/fetch",payload:r})},t.handleCancel=function(){var e=t.props.dispatch;e({type:"area/hideModel"})},t.handleDelete=function(e){var a=t.props.dispatch,l=t.state,n=l.page,r=l.size,d=l.formValues;s.default.confirm({title:"\u786e\u8ba4\u8981\u5220\u9664\u9009\u62e9\u7684\u533a\u57df\u4fe1\u606f\u5417?",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){new Promise(function(t){a({type:"area/remove",payload:{resolve:t,id:e}})}).then(function(e){if(200===e.code){var t=(0,p.default)({page:n,size:r},d);a({type:"area/fetch",payload:t})}})}})},t.handleTableMenuClick=function(e){var a=t.props.dispatch,l=t.state,n=l.selectedRows,r=l.page,d=l.size,u=l.formValues;if(n){var o=(0,m.default)((0,m.default)(t));"remove"===e.key&&s.default.confirm({title:"\u786e\u8ba4\u8981\u5220\u9664\u9009\u62e9\u7684\u533a\u57df\u4fe1\u606f\u5417?",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){new Promise(function(e){a({type:"area/remove",payload:{resolve:e,ids:n.map(function(e){return e.key})}})}).then(function(e){if(200===e.code){o.setState({selectedRows:[]});var t=(0,p.default)({page:r,size:d},u);a({type:"area/fetch",payload:t})}})}})}else c.default.error("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u6761\u8bb0\u5f55")},t.importXml=function(){c.default.warn("TODO: \u5bfc\u5165\u529f\u80fd\u6682\u672a\u5f00\u53d1")},t.handleTableSelectRows=function(e){t.setState({selectedRows:e})},t.handleTableChange=function(e){var a=t.props.dispatch,l=t.state.formValues,n=(0,p.default)({page:e.current,size:e.pageSize},l);t.setState({page:e.current,size:e.pageSize}),a({type:"area/fetch",payload:n})},t}return(0,k.default)(a,e),(0,b.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"area/fetch",payload:{}})}},{key:"render",value:function(){var e=this,a=this.props,t=a.form.getFieldDecorator,l=a.area,n=l.data,c=l.current,p=l.visible,m=a.loading,h=a.loading2,y=this.state.selectedRows,g=T.default.createElement(f.default,{onClick:this.handleTableMenuClick,selectedKeys:["remove"]},T.default.createElement(f.default.Item,{key:"remove"},"\u5220\u9664")),b=[{title:"\u4e0a\u7ea7\u7f16\u7801",dataIndex:"pcode"},{title:"\u533a\u57df\u7f16\u7801",dataIndex:"code"},{title:"\u533a\u57df\u540d\u79f0",dataIndex:"name"},{title:"\u533a\u57df\u62fc\u97f3",dataIndex:"pinyin"},{title:"\u533a\u57df\u7b80\u62fc",dataIndex:"jianpin"},{title:"\u64cd\u4f5c",render:function(a){return T.default.createElement(T.Fragment,null,T.default.createElement("a",{onClick:function(){return e.showModal(a)}},"\u7f16\u8f91"),T.default.createElement(i.default,{type:"vertical"}),T.default.createElement("a",{onClick:function(){return e.handleDelete(a.key)}},"\u5220\u9664"))}}],w={okText:"\u4fdd\u5b58",onOk:this.handleSubmit,onCancel:this.handleCancel},C=function(){return T.default.createElement(x.default,{onSubmit:e.handleSubmit},T.default.createElement(D,{labelCol:{span:5},wrapperCol:{span:15},label:"\u4e0a\u7ea7\u7f16\u7801"},t("pcode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df\u4e0a\u7ea7\u7f16\u7801"}],initialValue:c.pcode})(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u4e0a\u7ea7\u7f16\u7801"}))),T.default.createElement(D,{labelCol:{span:5},wrapperCol:{span:15},label:"\u533a\u57df\u540d\u79f0"},t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df\u540d\u79f0,\u957f\u5ea6\u57282-36\u4e2a\u5b57\u7b26",min:2,max:36}],initialValue:c.name})(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u540d\u79f0"}))),T.default.createElement(D,{labelCol:{span:5},wrapperCol:{span:15},label:"\u533a\u57df\u7f16\u7801"},t("code",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df\u7f16\u7801"}],initialValue:c.code})(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u7f16\u7801"}))),T.default.createElement(D,{labelCol:{span:5},wrapperCol:{span:15},label:"\u540d\u79f0\u62fc\u97f3"},t("pinyin",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df\u540d\u79f0\u62fc\u97f3"}],initialValue:c.pinyin})(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u540d\u79f0\u62fc\u97f3"}))),T.default.createElement(D,{labelCol:{span:5},wrapperCol:{span:15},label:"\u540d\u79f0\u7b80\u62fc"},t("jianpin",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df\u540d\u79f0\u7b80\u62fc"}],initialValue:c.jianpin})(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u540d\u79f0\u7b80\u62fc"}))),T.default.createElement(D,{labelCol:{span:5},wrapperCol:{span:15},label:"\u533a\u57df\u7ecf\u5ea6"},t("lng",{initialValue:c.lng})(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u7ecf\u5ea6"}))),T.default.createElement(D,{labelCol:{span:5},wrapperCol:{span:15},label:"\u533a\u57df\u7eac\u5ea6"},t("lat",{initialValue:c.lat})(T.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u533a\u57df\u7eac\u5ea6"}))))};return T.default.createElement(R.default,null,T.default.createElement(d.default,{bordered:!1},T.default.createElement("div",{className:P.default.tableList},T.default.createElement("div",{className:P.default.tableListForm},T.default.createElement(M,{handleSearch:this.handleSearch,loading:m,wrappedComponentRef:function(a){return e.formRef=a}})),T.default.createElement("div",{className:P.default.tableListOperator},T.default.createElement(v.default,{icon:"plus",type:"primary",onClick:function(){return e.showModal({})}},"\u65b0\u5efa"),T.default.createElement(v.default,{icon:"cloud-upload",type:"dashed",onClick:function(){return e.importXml({})}},"\u5bfc\u5165"),y.length>0&&T.default.createElement("span",null,T.default.createElement(u.default,{overlay:g},T.default.createElement(v.default,null," \u6279\u91cf\u64cd\u4f5c ",T.default.createElement(o.default,{type:"down"})," ")))),T.default.createElement(O.default,{selectedRows:y,loading:m,data:n,columns:b,onSelectRow:this.handleTableSelectRows,onChange:this.handleTableChange}))),T.default.createElement(s.default,(0,r.default)({title:"".concat(c&&c.key?"\u7f16\u8f91":"\u6dfb\u52a0","\u533a\u57df"),width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,confirmLoading:h,visible:p},w),C()))}}]),a}(T.PureComponent))||z)||z),j=I;a.default=j}}]);