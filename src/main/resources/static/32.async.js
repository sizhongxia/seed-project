(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{dkjG:function(e,t,a){e.exports={tableList:"antd-pro\\pages\\-monitor-device\\-fog-gun-tableList",tableListOperator:"antd-pro\\pages\\-monitor-device\\-fog-gun-tableListOperator",antCascaderPicker:"antd-pro\\pages\\-monitor-device\\-fog-gun-antCascaderPicker",tableListForm:"antd-pro\\pages\\-monitor-device\\-fog-gun-tableListForm",submitButtons:"antd-pro\\pages\\-monitor-device\\-fog-gun-submitButtons"}},pA7c:function(e,t,a){"use strict";var l=a("xK3H"),n=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fhlT");var d=l(a("kXZy"));a("v0Pg");var r=l(a("Byrh"));a("fThj");var u=l(a("cYEd"));a("VfWj");var i=l(a("Otdh"));a("Ktq0");var o=l(a("fL5V"));a("XFd2");var c=l(a("33fr")),s=l(a("SeLb")),f=l(a("8g53"));a("/MhY");var p=l(a("w0+5"));a("/26P");var m=l(a("aYvq"));a("mKhK");var h=l(a("iW5v"));a("Jm7A");var g=l(a("F1Zk"));a("Lzml");var y=l(a("vpm+"));a("1pPU");var v=l(a("KjZ1")),E=l(a("Sx57")),k=l(a("4zp0")),b=l(a("iVWQ")),w=l(a("lF+r")),C=l(a("PApH"));a("Q3sr");var R,x,S,L=l(a("9NP+")),N=n(a("zLBQ")),P=a("LneV"),T=l(a("D/dJ")),F=a("HOty"),M=l(a("CkN6")),z=l(a("zHco")),B=l(a("dkjG")),I=L.default.Item,V=function(e){function t(){return(0,E.default)(this,t),(0,b.default)(this,(0,w.default)(t).apply(this,arguments))}return(0,C.default)(t,e),(0,k.default)(t,[{key:"render",value:function(){var e=this.props,t=e.handleFileChange,a=e.resetReceiptByUuid,l=e.current;return N.default.createElement(m.default,{gutter:{md:12,lg:24,xl:24}},N.default.createElement(h.default,{lg:24,md:24,sm:24},""!==l.receipt&&N.default.createElement("div",{style:{minHeight:240}},N.default.createElement("img",{style:{width:"100%",maxHeight:240,marginBottom:10},src:l.receipt})),N.default.createElement(g.default,{name:"avatar",accept:"image/*",showUploadList:!1,action:(0,F.joinHost)("upload/change/devicereceipt?uuid="+l.key),onChange:t},N.default.createElement(y.default,{style:{marginBottom:40,marginTop:10}},N.default.createElement(v.default,{type:"upload"})," \u4e0a\u4f20/\u66f4\u6539\u56de\u6267\u5355")),N.default.createElement(y.default,{onClick:function(){a(l.key)}},"\u79fb\u9664")))}}]),t}(N.default.Component),O=L.default.create()(V),U=function(e){function t(){var e,a;(0,E.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,b.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(n))),a.handleFormReset=function(){var e=a.props.form;e.resetFields()},a.getItemsValue=function(){return a.props.form.getFieldsValue()},a}return(0,C.default)(t,e),(0,k.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.handleSearch,l=e.loading;return N.default.createElement(L.default,{onSubmit:a,layout:"inline"},N.default.createElement(m.default,{gutter:{md:12,lg:24,xl:48}},N.default.createElement(h.default,{lg:8,md:12,sm:24},N.default.createElement(I,{label:"\u8bbe\u5907\u540d\u79f0"},t("name")(N.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0"})))),N.default.createElement(h.default,{lg:8,md:12,sm:24},N.default.createElement(I,{label:"\u8bbe\u5907\u7f16\u7801"},t("equipmentNo")(N.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u7f16\u7801"})))),N.default.createElement(h.default,{lg:2,md:4,sm:24},N.default.createElement("span",{className:B.default.submitButtons},N.default.createElement(y.default,{type:"primary",className:B.default.searchSubmitBtn,htmlType:"submit",loading:l},"\u67e5\u8be2"),N.default.createElement(y.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}}]),t}(N.default.Component),j=L.default.create()(U),H=(R=(0,P.connect)(function(e){var t=e.dustNoise,a=e.loading;return{dustNoise:t,loading:a.effects["dustNoise/fetch"]}}),x=L.default.create(),R(S=x(S=function(e){function t(){var e,a;(0,E.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,b.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRows:[],formValues:{},scurrent:{},type:4,page:1,size:20},a.handleSearch=function(e){e.preventDefault();var t=a.props.dispatch,l=a.state,n=l.size,d=l.type,r=a.formRef.getItemsValue();a.setState({formValues:r,page:1});var u=(0,s.default)({page:1,type:d,size:n},r);t({type:"dustNoise/fetch",payload:u})},a.handleDelete=function(e){var t=a.props.dispatch,l=a.state,n=l.page,d=l.size,r=l.type,u=l.formValues;c.default.confirm({title:"\u786e\u8ba4\u8981\u5220\u9664\u9009\u62e9\u7684\u8bbe\u5907\u4fe1\u606f\u5417?",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){new Promise(function(a){t({type:"dustNoise/remove",payload:{resolve:a,id:e}})}).then(function(e){if(200===e.code){var a=(0,s.default)({page:n,type:r,size:d},u);t({type:"dustNoise/fetch",payload:a})}})}})},a.handleTableMenuClick=function(e){var t=a.state.selectedRows;t?o.default.warn("\u529f\u80fd\u5f00\u53d1\u4e2d..."):o.default.error("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u6761\u8bb0\u5f55")},a.handleTableSelectRows=function(e){a.setState({selectedRows:e})},a.showReceiptPicModel=function(e){var t=a.props.dispatch;new Promise(function(a){t({type:"dustNoise/getReceiptByUuid",payload:{resolve:a,uuid:e.key}})}).then(function(t){200===t.code?(e.receipt=t.data,a.setState({scurrent:e})):o.default.error(t.message)})},a.resetReceiptByUuid=function(e){var t=a.props.dispatch,l=(0,f.default)((0,f.default)(a));c.default.confirm({title:"\u786e\u8ba4\u8981\u79fb\u9664\u8be5\u56de\u6267\u5355\u5417?",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){new Promise(function(a){t({type:"dustNoise/resetReceiptByUuid",payload:{resolve:a,uuid:e}})}).then(function(e){200===e.code&&(o.default.success("\u79fb\u9664\u6210\u529f"),l.hideReceiptPicModel())})}})},a.hideReceiptPicModel=function(){a.setState({scurrent:{}})},a.handleFileChange=function(e){var t=a.state.scurrent;if(!t.uploading){var l=o.default.loading("\u6b63\u5728\u4e0a\u4f20...",0);t.uploading=!0,t.uploadLoadingModels=l,a.setState({scurrent:t})}if("done"===e.file.status){var n=e.file.response.data;"devicereceipt"===n.type&&(t.uploadLoadingModels&&t.uploadLoadingModels(),a.hideReceiptPicModel(),o.default.destroy(),setTimeout(function(){o.default.success("\u4e0a\u4f20\u6210\u529f")},100))}},a.handleTableChange=function(e){var t=a.props.dispatch,l=a.state.formValues,n=(0,s.default)({page:e.current,size:e.pageSize},l);a.setState({page:e.current,size:e.pageSize}),t({type:"dustNoise/fetch",payload:n})},a}return(0,C.default)(t,e),(0,k.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"dustNoise/fetch",payload:{type:4,page:1,size:20}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dustNoise.data,l=t.loading,n=this.state,o=n.selectedRows,s=n.scurrent,f=N.default.createElement(i.default,{onClick:this.handleTableMenuClick,selectedKeys:["remove"]},N.default.createElement(i.default.Item,{key:"export"},"\u5bfc\u51fa")),p=[{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"name"},{title:"\u8bbe\u5907\u7f16\u7801",dataIndex:"equipmentno"},{title:"\u6240\u5728\u5de5\u5730",dataIndex:"proname"},{title:"\u4ea7\u54c1\u4f9b\u5e94\u5546",dataIndex:"suppliercompany"},{title:"\u4ea7\u54c1\u4ee3\u7406\u5546",dataIndex:"agentcompany"},{title:"\u5728\u7ebf\u72b6\u6001",dataIndex:"lastonlinetime"},{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"addtime"},{title:"\u64cd\u4f5c",render:function(t){return N.default.createElement(N.Fragment,null,N.default.createElement(T.default,{to:"/deviceMonitor/fogGunEdit/".concat(t.key)},"\u7f16\u8f91"),N.default.createElement(u.default,{type:"vertical"}),N.default.createElement("a",{onClick:function(){return e.showReceiptPicModel(t)}},"\u56de\u6267\u5355"),N.default.createElement(u.default,{type:"vertical"}),N.default.createElement("a",{style:{color:"#f5222d"},onClick:function(){return e.handleDelete(t.key)}},"\u5220\u9664"))}}];return N.default.createElement(z.default,null,N.default.createElement(d.default,{bordered:!1},N.default.createElement("div",{className:B.default.tableList},N.default.createElement("div",{className:B.default.tableListForm},N.default.createElement(j,{handleSearch:this.handleSearch,loading:l,wrappedComponentRef:function(t){return e.formRef=t}})),N.default.createElement("div",{className:B.default.tableListOperator},N.default.createElement(T.default,{to:"/deviceMonitor/fogGunCreate"},N.default.createElement(y.default,{type:"dashed",icon:"plus"},"\u65b0\u589e")),o.length>0&&N.default.createElement("span",null,N.default.createElement(r.default,{overlay:f},N.default.createElement(y.default,null," \u6279\u91cf\u64cd\u4f5c ",N.default.createElement(v.default,{type:"down"})," ")))),N.default.createElement(M.default,{selectedRows:o,loading:l,data:a,columns:p,onSelectRow:this.handleTableSelectRows,onChange:this.handleTableChange}))),N.default.createElement(c.default,{title:"\u56de\u6267\u5355",width:640,bodyStyle:{padding:"25px 52px",textAlign:"center"},destroyOnClose:!0,onCancel:this.hideReceiptPicModel,visible:!!s.key,footer:null},N.default.createElement(O,{current:s,resetReceiptByUuid:this.resetReceiptByUuid,handleFileChange:this.handleFileChange})))}}]),t}(N.PureComponent))||S)||S),A=H;t.default=A}}]);