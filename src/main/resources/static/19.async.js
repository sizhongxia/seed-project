(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{iZhb:function(e,t,l){"use strict";var a=l("xK3H"),d=l("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,l("fhlT");var u=a(l("kXZy"));l("Lzml");var r=a(l("vpm+"));l("/26P");var n=a(l("aYvq"));l("cFNL");var i=a(l("gOg5"));l("9TwZ");var f=a(l("wOVV"));l("mKhK");var c=a(l("iW5v"));l("/MhY");var o=a(l("w0+5"));l("fThj");var m=a(l("cYEd"));l("1pPU");var s=a(l("KjZ1"));l("XFd2");var p=a(l("33fr")),E=a(l("SeLb"));l("Ktq0");var h=a(l("fL5V")),v=a(l("Sx57")),y=a(l("4zp0")),g=a(l("iVWQ")),w=a(l("lF+r")),b=a(l("PApH")),P=a(l("8g53"));l("Q3sr");var V=a(l("9NP+"));l("E2ON");var I,k,T,j=a(l("jjSt")),S=d(l("zLBQ")),q=l("LneV"),C=a(l("I9Uw")),O=a(l("r27q")),L=a(l("zHco")),U=j.default.Option,x=(I=(0,q.connect)(function(e){var t=e.video,l=e.loading;return{video:t,loading:l.effects["video/initProjectList"],creating:l.effects["video/saveOrUpdate"]}}),k=V.default.create(),I(T=k(T=function(e){function t(){var e,l;(0,v.default)(this,t);for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];return l=(0,g.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(d))),l.state={uuid:"",isEyeClient:!0,currProUuid:""},l.findProjectTowercranes=function(e){var t=l.props.dispatch;e?(l.setState({currProUuid:e}),new Promise(function(l){t({type:"video/getProjectTowercranes",payload:{resolve:l,proUuid:e}})}).then(function(e){}).catch(function(){t({type:"cleanProjectTowercranes"})})):t({type:"cleanProjectTowercranes"})},l.changeShowProjectTowercranes=function(e){var t=l.props.dispatch,a=l.state.currProUuid;if("1"===e){var d=(0,P.default)((0,P.default)(l));if(""===a)return void h.default.warn("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u5de5\u5730");new Promise(function(e){t({type:"video/getProjectTowercranes",payload:{resolve:e,proUuid:a}})}).then(function(e){d.setState({isEyeClient:!0})}).catch(function(){})}else l.setState({isEyeClient:!1})},l.handleSubmit=function(e){e.preventDefault();var t=l.state.uuid,a=l.props,d=a.dispatch,u=a.form;u.validateFieldsAndScroll(function(e,l){e||new Promise(function(e){d({type:"video/saveOrUpdate",payload:(0,E.default)({resolve:e,uuid:t},l)})}).then(function(e){200===e.code?p.default.confirm({content:"\u4fdd\u5b58\u6210\u529f, \u662f\u5426\u8df3\u8f6c\u81f3\u8bbe\u5907\u5217\u8868\u9875\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){O.default.push("/deviceMonitor/video")},onCancel:function(){t?d({type:"video/initDevice",payload:{uuid:t}}):u.resetFields()}}):h.default.error(e.message)})})},l}return(0,b.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,l=e.match,a=l.params.deviceUuid;if(a){this.setState({uuid:a});var d=this;new Promise(function(e){t({type:"video/initDevice",payload:{resolve:e,uuid:a}})}).then(function(e){200!==e.code&&p.default.confirm({content:"\u65e0\u6548\u7684\u53c2\u6570",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){O.default.push("/deviceMonitor/video")},onCancel:function(){O.default.push("/deviceMonitor/video")}}),d.setState({currProUuid:e.data.prouuid,isEyeClient:1==e.data.iseyeclient})})}else t({type:"video/cleanCurrent",payload:{}});t({type:"video/initProjectList",payload:{}})}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,l=e.video,a=l.projects,d=l.towercranes,p=l.current,E=e.loading,h=e.creating,v=this.state,y=v.uuid,g=v.isEyeClient;return S.default.createElement(L.default,null,S.default.createElement(u.default,{title:"".concat(""===y?"\u65b0\u589e":"\u4fee\u6539","\u8bbe\u5907"),bordered:!1,loading:E},S.default.createElement(V.default,{onSubmit:this.handleSubmit,layout:"vertical",hideRequiredMark:!1},S.default.createElement(m.default,{orientation:"left"},S.default.createElement(s.default,{type:"info-circle"})," \u57fa\u672c\u4fe1\u606f"),S.default.createElement(n.default,{gutter:24},S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u8bbe\u5907\u540d\u79f0"},t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0"}],initialValue:p.name})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u6240\u5c5e\u5de5\u5730"},t("prouuid",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5de5\u5730"}],initialValue:p.prouuid})(S.default.createElement(j.default,{style:{width:"100%"},showSearch:!0,placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u5de5\u5730",onChange:this.findProjectTowercranes,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},a.map(function(e){return S.default.createElement(U,{key:e.key,value:e.key},e.name)}))))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u8bbe\u5907\u54c1\u724c"},t("brandname",{initialValue:p.brandname})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u54c1\u724c"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u8bbe\u5907\u7f16\u7801"},t("equipmentno",{initialValue:p.equipmentno})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u7f16\u7801"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u5b89\u88c5\u65f6\u95f4"},t("deploytime",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b89\u88c5\u65f6\u95f4"}],initialValue:p.deploytime&&(0,C.default)(p.deploytime,"YYYY-MM-DD")})(S.default.createElement(f.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u5b89\u88c5\u65f6\u95f4"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u4f4d\u7f6e\u7ecf\u5ea6"},t("lng",{initialValue:p.lng})(S.default.createElement(i.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u4f4d\u7f6e\u7ecf\u5ea6"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u4f4d\u7f6e\u7eac\u5ea6"},t("lat",{initialValue:p.lat})(S.default.createElement(i.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u4f4d\u7f6e\u7eac\u5ea6"}))))),S.default.createElement(m.default,{orientation:"left"},S.default.createElement(s.default,{type:"deployment-unit"})," \u76d1\u63a7\u914d\u7f6e"),S.default.createElement(n.default,{gutter:24},S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u8bbe\u5907\u7c7b\u578b"},t("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bbe\u5907\u7c7b\u578b"}],initialValue:p.type})(S.default.createElement(j.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u8bbe\u5907\u7c7b\u578b"},S.default.createElement(U,{value:"1"},"\u7403\u673a"),S.default.createElement(U,{value:"2"},"\u67aa\u673a"))))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u5854\u540a\u773c"},t("iseyeclient",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u662f\u5426\u662f\u5854\u540a\u773c"}],initialValue:p.iseyeclient})(S.default.createElement(j.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u662f\u5426\u662f\u5854\u540a\u773c",onChange:this.changeShowProjectTowercranes},S.default.createElement(U,{value:"1"},"\u662f"),S.default.createElement(U,{value:"2"},"\u5426"))))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u9009\u62e9\u5854\u540a"},t("equipmentuuid",{initialValue:p.equipmentuuid})(S.default.createElement(j.default,{disabled:!g,style:{width:"100%"},showSearch:!0,placeholder:"\u8bf7\u9009\u62e9\u5854\u540a",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},d.map(function(e){return S.default.createElement(U,{key:e.key,value:e.key},e.name)}))))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u652f\u6301\u64cd\u4f5c"},t("voperations",{initialValue:p.voperations})(S.default.createElement(j.default,{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u652f\u6301\u64cd\u4f5c"},S.default.createElement(U,{value:"1"},"\u53d8\u7126"),S.default.createElement(U,{value:"2"},"\u65cb\u8f6c"),S.default.createElement(U,{value:"3"},"\u7126\u70b9"),S.default.createElement(U,{value:"4"},"\u5149\u5708"))))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u4e00\u4f53\u673a\u63a8\u6d41"},t("istowereye",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u662f\u5426\u662f\u4e00\u4f53\u673a\u63a8\u6d41"}],initialValue:p.istowereye})(S.default.createElement(j.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u662f\u5426\u662f\u4e00\u4f53\u673a\u63a8\u6d41"},S.default.createElement(U,{value:"1"},"\u662f"),S.default.createElement(U,{value:"2"},"\u5426"))))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u8fde\u63a5\u65b9\u5f0f"},t("pushflowmode",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8fde\u63a5\u65b9\u5f0f"}],initialValue:p.pushflowmode})(S.default.createElement(j.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u8fde\u63a5\u65b9\u5f0f"},S.default.createElement(U,{value:"0"},"\u547c\u53eb"),S.default.createElement(U,{value:"1"},"\u957f\u671f"))))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u89c6\u9891IP"},t("ip",{initialValue:p.ip})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165IP\u5730\u5740\u548c\u7aef\u53e3"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u89c6\u9891\u7aef\u53e3"},t("port",{initialValue:p.port})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u7aef\u53e3"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u89c6\u9891\u62c9\u6d41\u5730\u5740"},t("flowaddress",{initialValue:p.flowaddress})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u89c6\u9891\u62c9\u6d41\u5730\u5740"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u89c6\u9891\u63a8\u6d41\u5730\u5740"},t("streamurl",{initialValue:p.streamurl})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u89c6\u9891\u63a8\u6d41\u5730\u5740"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u89c6\u9891\u64ad\u653e\u5730\u5740"},t("playurl",{initialValue:p.playurl})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u89c6\u9891\u64ad\u653e\u5730\u5740"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u7528\u6237\u540d"},t("username",{initialValue:p.username})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})))),S.default.createElement(c.default,{lg:6,md:12,sm:24},S.default.createElement(V.default.Item,{label:"\u5bc6\u7801"},t("password",{initialValue:p.password})(S.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))))),S.default.createElement(n.default,{gutter:24},S.default.createElement(c.default,{lg:24,md:24,sm:24,style:{textAlign:"center"}},S.default.createElement(r.default,{type:"primary",htmlType:"submit",loading:h},"".concat(""===y?"\u65b0\u589e":"\u4fee\u6539","\u8bbe\u5907\u4fe1\u606f")))))))}}]),t}(S.PureComponent))||T)||T),M=x;t.default=M}}]);