(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{FstY:function(e,t,a){e.exports={filterCardList:"antd-pro\\pages\\-admin\\-company-filterCardList",cardInfo:"antd-pro\\pages\\-admin\\-company-cardInfo",pagination:"antd-pro\\pages\\-admin\\-company-pagination",pageHeaderContent:"antd-pro\\pages\\-admin\\-company-pageHeaderContent"}},kFY6:function(e,t,a){"use strict";var l=a("xK3H"),n=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g1BC");var r=l(a("RvKu")),i=l(a("dnxz"));a("79JM");var d=l(a("DmMy"));a("fhlT");var o=l(a("kXZy"));a("Jm7A");var u=l(a("F1Zk"));a("sXHd");var c=l(a("oEbq"));a("khen");var f=l(a("3J+T"));a("1pPU");var s=l(a("KjZ1"));a("Lzml");var p=l(a("vpm+"));a("/MhY");var h=l(a("w0+5"));a("Ktq0");var m=l(a("fL5V")),v=l(a("SeLb"));a("XFd2");var g=l(a("33fr")),y=l(a("Sx57")),E=l(a("4zp0")),w=l(a("iVWQ")),C=l(a("lF+r")),b=l(a("PApH")),k=l(a("8g53"));a("E2ON");var S=l(a("jjSt"));a("Q3sr");var x,L,M,N=l(a("9NP+")),D=n(a("zLBQ")),z=l(a("D/dJ")),H=a("LneV"),P=l(a("xNuS")),F=l(a("zHco")),T=a("HOty"),B=l(a("FstY")),I=N.default.Item,O=S.default.Option,A=(x=(0,H.connect)(function(e){var t=e.fiveEnter,a=e.loading;return{fiveEnter:t,loading:a.effects["fiveEnter/fetch"],loading2:a.effects["fiveEnter/saveOrUpdate"]}}),L=N.default.create(),x(M=L(M=function(e){function t(){var e,a;(0,y.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,w.default)(this,(e=(0,C.default)(t)).call.apply(e,[this].concat(n))),a.state={visible:!1,currentPage:1,pageSize:12,keyword:""},a.loadData=function(e,t,l){var n=a.props.dispatch;n({type:"fiveEnter/fetch",payload:{page:e,size:t,keyword:l}})},a.searchCompany=function(e){var t=a.state.pageSize;a.setState({currentPage:1,keyword:e}),a.loadData(1,t,e)},a.showModal=function(){a.setState({visible:!0})},a.showEditModal=function(e){var t=a.props.dispatch;t({type:"fiveEnter/getById",payload:{uuid:e}})},a.handleCancel=function(){var e=a.props.dispatch;e({type:"fiveEnter/hideModel"}),a.setState({visible:!1})},a.handleDelete=function(e){var t=a.props.dispatch,l=a.state,n=l.currentPage,r=l.pageSize,i=l.keyword,d=(0,k.default)((0,k.default)(a));g.default.confirm({content:"\u786e\u8ba4\u8981\u5220\u9664\u5f53\u524d\u516c\u53f8\u5417\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){new Promise(function(a){t({type:"fiveEnter/deleteById",payload:{resolve:a,uuid:e}})}).then(function(e){200===e.code&&d.loadData(n,r,i)})},onCancel:function(){}})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.fiveEnter.current,r=void 0===n?{}:n,i=t.form,d=a.state,o=d.currentPage,u=d.pageSize,c=d.keyword,f=r?r.id:"";i.validateFields(function(e,t){if(!e){var n=(0,k.default)((0,k.default)(a));new Promise(function(e){l({type:"fiveEnter/saveOrUpdate",payload:(0,v.default)({id:f,resolve:e},t)})}).then(function(e){200===e.code&&(n.setState({visible:!1}),n.loadData(o,u,c))})}})},a.handleFileChange=function(e){var t=a.state,l=t.currentPage,n=t.pageSize,r=t.keyword;"done"===e.file.status&&(m.default.success(e.file.name+" \u4e0a\u4f20\u6210\u529f\u3002"),a.loadData(l,n,r))},a.handleChangePage=function(e){var t=a.state,l=t.pageSize,n=t.keyword;a.setState({currentPage:e}),a.loadData(e,l,n)},a}return(0,b.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.currentPage,a=e.pageSize,l=e.keyword;this.loadData(t,a,l)}},{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,l=t.fiveEnter,n=l.data,m=l.current,v=void 0===m?{}:m,y=l.visible2,E=t.loading,w=t.loading2,C=this.state.visible,b={okText:"\u4fdd\u5b58",onOk:this.handleSubmit,onCancel:this.handleCancel},k=function(){return D.default.createElement(N.default,{onSubmit:e.handleSubmit},D.default.createElement(I,{labelCol:{span:5},wrapperCol:{span:15},label:"\u4f01\u4e1a\u540d\u79f0"},a("companyname",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u540d\u79f0,\u957f\u5ea6\u57284-80\u4e2a\u5b57\u7b26",min:4,max:80}],initialValue:v.name})(D.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u540d\u79f0"}))),D.default.createElement(I,{labelCol:{span:5},wrapperCol:{span:15},label:"\u4f01\u4e1a\u7b80\u79f0"},a("shortname",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u7b80\u79f0,\u957f\u5ea6\u57282-8\u4e2a\u5b57\u7b26",min:2,max:8}],initialValue:v.shortName})(D.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u7b80\u79f0"}))),D.default.createElement(I,{labelCol:{span:5},wrapperCol:{span:15},label:"\u4f01\u4e1a\u7c7b\u578b"},a("type",{rules:[{required:!0,message:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u7c7b\u578b"}],initialValue:v.type})(D.default.createElement(S.default,{multiple:!1,style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u4f01\u4e1a\u7c7b\u578b"},D.default.createElement(O,{key:"1"},"\u5efa\u8bbe\u5355\u4f4d"),D.default.createElement(O,{key:"2"},"\u65bd\u5de5\u5355\u4f4d"),D.default.createElement(O,{key:"3"},"\u8bbe\u8ba1\u5355\u4f4d"),D.default.createElement(O,{key:"4"},"\u76d1\u7406\u5355\u4f4d"),D.default.createElement(O,{key:"5"},"\u52d8\u5bdf\u5355\u4f4d"),D.default.createElement(O,{key:"6"},"\u52b3\u52a1\u5206\u5305\u5546"),D.default.createElement(O,{key:"7"},"\u96c6\u56e2\u516c\u53f8"),D.default.createElement(O,{key:"8"},"\u8bbe\u5907\u4f9b\u5e94\u5546"),D.default.createElement(O,{key:"9"},"\u8bbe\u5907\u4ee3\u7406\u5546")))),D.default.createElement(I,{labelCol:{span:5},wrapperCol:{span:15},label:"\u4f01\u4e1a\u7f51\u5740"},a("officialwebsite",{initialValue:v.officialwebsite})(D.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u7f51\u5740"}))),D.default.createElement(I,{labelCol:{span:5},wrapperCol:{span:15},label:"\u4f01\u4e1a\u5907\u6ce8"},a("description",{initialValue:v.description})(D.default.createElement(h.default.TextArea,{rows:3,placeholder:"\u8bf7\u8f93\u5165\u4f01\u4e1a\u5907\u6ce8"}))))},x=D.default.createElement("div",{style:{textAlign:"center"}},D.default.createElement(h.default.Search,{placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0\u67e5\u8be2",onSearch:this.searchCompany,style:{width:320}}),D.default.createElement(p.default,{onClick:this.showModal,style:{marginLeft:"4px"},type:"dashed",icon:"plus"},"\u65b0\u589e"));return D.default.createElement(F.default,{title:"\u5355\u4f4d\u5217\u8868",content:x},D.default.createElement("div",{className:B.default.filterCardList},D.default.createElement(d.default,{rowKey:"id",style:{marginTop:24},grid:{gutter:24,xl:4,lg:3,md:3,sm:2,xs:1},loading:E,dataSource:n.list,renderItem:function(t){return D.default.createElement(d.default.Item,{key:t.id},D.default.createElement(o.default,{hoverable:!0,bodyStyle:{paddingBottom:20},actions:[D.default.createElement("a",{onClick:function(a){a.preventDefault(),e.showEditModal(t.id)}},D.default.createElement(f.default,{title:"\u4fee\u6539"},D.default.createElement(s.default,{type:"edit"}))),D.default.createElement("a",{onClick:function(a){a.preventDefault(),e.handleDelete(t.id)}},D.default.createElement(f.default,{title:"\u5220\u9664"},D.default.createElement(s.default,{type:"delete"}))),D.default.createElement(z.default,{to:"/company/department/".concat(t.id)},D.default.createElement(f.default,{title:"\u90e8\u95e8\u4fe1\u606f"},D.default.createElement(s.default,{type:"cluster"})))]},D.default.createElement(o.default.Meta,{avatar:D.default.createElement(u.default,{name:"avatar",accept:"image/*",showUploadList:!1,action:(0,T.joinHost)("upload/change/companylogo?uuid="+t.id),onChange:e.handleFileChange},D.default.createElement(f.default,{title:"\u4e0a\u4f20\u4f01\u4e1aLogo"},D.default.createElement(c.default,{size:"small",src:t.logo}))),title:t.name}),D.default.createElement("div",{className:B.default.cardItemContent},D.default.createElement("div",{className:B.default.cardInfo},D.default.createElement(P.default,{lines:1},t.shortName,"\u3001",t.typeName),D.default.createElement(P.default,{lines:1},t.description)))))}})),D.default.createElement("div",{className:B.default.pagination},D.default.createElement(r.default,(0,i.default)({},n.pagination,{onChange:this.handleChangePage}))),D.default.createElement(g.default,(0,i.default)({title:"".concat(v?"\u7f16\u8f91":"\u6dfb\u52a0","\u5355\u4f4d"),width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,confirmLoading:w,visible:C||y},b),k()))}}]),t}(D.PureComponent))||M)||M),V=A;t.default=V},mcBY:function(e,t,a){e.exports={ellipsis:"antd-pro\\components\\-ellipsis\\index-ellipsis",lines:"antd-pro\\components\\-ellipsis\\index-lines",shadow:"antd-pro\\components\\-ellipsis\\index-shadow",lineClamp:"antd-pro\\components\\-ellipsis\\index-lineClamp"}},xNuS:function(e,t,a){"use strict";var l=a("3rQ3"),n=a("xK3H");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.cutStrByFullLength=t.getStrFullLength=void 0;var r=n(a("dnxz")),i=n(a("9bEj")),d=n(a("Sx57")),o=n(a("4zp0")),u=n(a("iVWQ")),c=n(a("lF+r")),f=n(a("PApH"));a("khen");var s=n(a("3J+T")),p=n(a("+S5U")),h=l(a("zLBQ")),m=n(a("iczh")),v=n(a("mcBY")),g=void 0!==document.body.style.webkitLineClamp,y={overflowWrap:"break-word",wordWrap:"break-word"},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("").reduce(function(e,t){var a=t.charCodeAt(0);return a>=0&&a<=128?e+1:e+2},0)};t.getStrFullLength=E;var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=0;return e.split("").reduce(function(e,l){var n=l.charCodeAt(0);return a+=n>=0&&n<=128?1:2,a<=t?e+l:e},"")};t.cutStrByFullLength=w;var C=function(e){var t=e.text,a=e.length,l=e.tooltip,n=e.fullWidthRecognition,r=(0,p.default)(e,["text","length","tooltip","fullWidthRecognition"]);if("string"!==typeof t)throw new Error("Ellipsis children must be string.");var i=n?E(t):t.length;if(i<=a||a<0)return h.default.createElement("span",r,t);var d,o="...";return d=a-o.length<=0?"":n?w(t,a):t.slice(0,a),l?h.default.createElement(s.default,{overlayStyle:y,title:t},h.default.createElement("span",null,d,o)):h.default.createElement("span",r,d,o)},b=function(e){function t(){var e,a;(0,d.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,u.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(n))),a.state={text:"",targetCount:0},a.computeLine=function(){var e=a.props.lines;if(e&&!g){var t=a.shadowChildren.innerText||a.shadowChildren.textContent,l=parseInt(getComputedStyle(a.root).lineHeight,10),n=e*l;a.content.style.height="".concat(n,"px");var r=a.shadowChildren.offsetHeight,i=a.shadow.firstChild;if(r<=n)return void a.setState({text:t,targetCount:t.length});var d=t.length,o=Math.ceil(d/2),u=a.bisection(n,o,0,d,t,i);a.setState({text:t,targetCount:u})}},a.bisection=function(e,t,l,n,r,i){var d="...",o=t,u=n,c=l;i.innerHTML=r.substring(0,o)+d;var f=i.offsetHeight;return f<=e?(i.innerHTML=r.substring(0,o+1)+d,f=i.offsetHeight,f>e||o===c?o:(c=o,o=u-c===1?1+c:Math.floor((u-c)/2)+c,a.bisection(e,o,c,u,r,i))):o-1<0?o:(i.innerHTML=r.substring(0,o-1)+d,f=i.offsetHeight,f<=e?o-1:(u=o,o=Math.floor((u-c)/2)+c,a.bisection(e,o,c,u,r,i)))},a.handleRoot=function(e){a.root=e},a.handleContent=function(e){a.content=e},a.handleNode=function(e){a.node=e},a.handleShadow=function(e){a.shadow=e},a.handleShadowChildren=function(e){a.shadowChildren=e},a}return(0,f.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.node&&this.computeLine()}},{key:"componentDidUpdate",value:function(e){var t=this.props.lines;t!==e.lines&&this.computeLine()}},{key:"render",value:function(){var e,t=this.state,a=t.text,l=t.targetCount,n=this.props,d=n.children,o=n.lines,u=n.length,c=n.className,f=n.tooltip,E=n.fullWidthRecognition,w=(0,p.default)(n,["children","lines","length","className","tooltip","fullWidthRecognition"]),b=(0,m.default)(v.default.ellipsis,c,(e={},(0,i.default)(e,v.default.lines,o&&!g),(0,i.default)(e,v.default.lineClamp,o&&g),e));if(!o&&!u)return h.default.createElement("span",(0,r.default)({className:b},w),d);if(!o)return h.default.createElement(C,(0,r.default)({className:b,length:u,text:d||"",tooltip:f,fullWidthRecognition:E},w));var k="antd-pro-ellipsis-".concat("".concat((new Date).getTime()).concat(Math.floor(100*Math.random())));if(g){var S="#".concat(k,"{-webkit-line-clamp:").concat(o,";-webkit-box-orient: vertical;}"),x=h.default.createElement("div",(0,r.default)({id:k,className:b},w),h.default.createElement("style",null,S),d);return f?h.default.createElement(s.default,{overlayStyle:y,title:d},x):x}var L=h.default.createElement("span",{ref:this.handleNode},l>0&&a.substring(0,l),l>0&&l<a.length&&"...");return h.default.createElement("div",(0,r.default)({},w,{ref:this.handleRoot,className:b}),h.default.createElement("div",{ref:this.handleContent},f?h.default.createElement(s.default,{overlayStyle:y,title:a},L):L,h.default.createElement("div",{className:v.default.shadow,ref:this.handleShadowChildren},d),h.default.createElement("div",{className:v.default.shadow,ref:this.handleShadow},h.default.createElement("span",null,a))))}}]),t}(h.Component);t.default=b}}]);