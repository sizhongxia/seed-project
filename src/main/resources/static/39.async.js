(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{"3tEj":function(e,t,a){"use strict";var n=a("xK3H"),d=a("3rQ3");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g1BC");var o=n(a("RvKu")),l=n(a("dnxz"));a("fhlT");var i=n(a("kXZy"));a("79JM");var r=n(a("DmMy"));a("Lzml");var s=n(a("vpm+"));a("/MhY");var u=n(a("w0+5")),p=n(a("SeLb"));a("XFd2");var c=n(a("33fr")),f=n(a("Sx57")),m=n(a("4zp0")),h=n(a("iVWQ")),g=n(a("lF+r")),v=n(a("PApH")),y=n(a("8g53"));a("Q3sr");var C,w,S,k=n(a("9NP+")),b=d(a("zLBQ")),E=a("h/XY"),D=a("LneV"),x=n(a("zHco")),P=n(a("8GQo")),z=k.default.Item,M=(C=(0,D.connect)(function(e){var t=e.post,a=e.loading;return{post:t,loading:a.effects["post/fetch"]}}),w=k.default.create(),C(S=w(S=function(e){function t(){var e,a;(0,f.default)(this,t);for(var n=arguments.length,d=new Array(n),o=0;o<n;o++)d[o]=arguments[o];return a=(0,h.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(d))),a.state={visible:!1,currentPage:1,pageSize:20,keyword:"",deptUuid:""},a.loadData=function(e,t,n,d){var o=a.props.dispatch;o({type:"post/fetch",payload:{page:e,size:t,keyword:d,deptUuid:n}})},a.reloadData=function(){var e=a.state,t=e.currentPage,n=e.pageSize,d=e.deptUuid,o=e.keyword;a.loadData(t,n,d,o)},a.showModal=function(){a.setState({visible:!0})},a.showEditModal=function(e){var t=a.props.dispatch;t({type:"post/getById",payload:{uuid:e}})},a.handleCancel=function(){var e=a.props.dispatch;e({type:"post/hideModel"}),a.setState({visible:!1})},a.handleDelete=function(e){var t=a.props.dispatch,n=a.state,d=n.currentPage,o=n.pageSize,l=n.deptUuid,i=n.keyword,r=(0,y.default)((0,y.default)(a));c.default.confirm({content:"\u786e\u8ba4\u8981\u5220\u9664\u5f53\u524d\u5c97\u4f4d\u5417\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){new Promise(function(a){t({type:"post/deleteById",payload:{resolve:a,uuid:e}})}).then(function(e){200===e.code&&r.loadData(d,o,l,i)})},onCancel:function(){}})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.dispatch,d=t.post.current,o=void 0===d?{}:d,l=t.form,i=a.state,r=i.currentPage,s=i.pageSize,u=i.deptUuid,c=i.keyword,f=o?o.id:"";l.validateFields(function(e,t){if(!e){var d=(0,y.default)((0,y.default)(a));new Promise(function(e){n({type:"post/saveOrUpdate",payload:(0,p.default)({resolve:e,id:f,deptUuid:u},t)})}).then(function(e){200===e.code&&(d.setState({visible:!1}),d.loadData(r,s,u,c))})}})},a.handleChangePage=function(e){var t=a.state,n=t.pageSize,d=t.deptUuid,o=t.keyword;a.setState({currentPage:e}),that.loadData(e,n,d,o)},a}return(0,v.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.match,t=this.state,a=t.currentPage,n=t.pageSize,d=t.keyword,o=e.params.deptUuid;o&&(this.setState({deptUuid:o}),this.loadData(a,n,o,d))}},{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.post,d=n.data,p=n.current,f=void 0===p?{}:p,m=n.visible2,h=t.loading,g=this.state.visible,v=function(){return b.default.createElement(k.default,{onSubmit:e.handleSubmit},b.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5c97\u4f4d\u540d\u79f0"},a("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5c97\u4f4d\u540d\u79f0,\u957f\u5ea6\u57282-36\u4e2a\u5b57\u7b26",min:2,max:36}],initialValue:f.name})(b.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165\u5c97\u4f4d\u540d\u79f0"}))))},y={okText:"\u4fdd\u5b58",onOk:this.handleSubmit,onCancel:this.handleCancel};return b.default.createElement(x.default,null,b.default.createElement("div",{className:P.default.standardList},b.default.createElement(i.default,{className:P.default.listCard,bordered:!1,title:d.deptName,style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"}},b.default.createElement(s.default,{type:"dashed",style:{marginBottom:8},icon:"plus",onClick:this.showModal,ref:function(t){e.addBtn=(0,E.findDOMNode)(t)}},"\u6dfb\u52a0"),b.default.createElement(s.default,{type:"dashed",style:{marginBottom:8},icon:"reload",loading:h,onClick:this.reloadData},"\u5237\u65b0\u6570\u636e"),b.default.createElement(r.default,{size:"large",rowKey:"id",loading:h,dataSource:d.list||[],renderItem:function(t){return b.default.createElement(r.default.Item,{actions:[b.default.createElement("a",{onClick:function(a){a.preventDefault(),e.showEditModal(t.id)}},"\u7f16\u8f91"),b.default.createElement("a",{onClick:function(a){a.preventDefault(),e.handleDelete(t.id)}},"\u5220\u9664")]},b.default.createElement(r.default.Item.Meta,{title:t.name}))}}))),b.default.createElement("div",{className:P.default.pagination},b.default.createElement(o.default,(0,l.default)({},d.pagination,{onChange:this.handleChangePage}))),b.default.createElement(c.default,(0,l.default)({title:"".concat(f&&f.id?"\u7f16\u8f91":"\u6dfb\u52a0","\u5c97\u4f4d"),width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,visible:g||m},y),v()))}}]),t}(b.PureComponent))||S)||S),I=M;t.default=I},"8GQo":function(e,t,a){e.exports={standardList:"antd-pro\\pages\\-admin\\-post-standardList",headerInfo:"antd-pro\\pages\\-admin\\-post-headerInfo",listContent:"antd-pro\\pages\\-admin\\-post-listContent",listContentItem:"antd-pro\\pages\\-admin\\-post-listContentItem",extraContentSearch:"antd-pro\\pages\\-admin\\-post-extraContentSearch",pagination:"antd-pro\\pages\\-admin\\-post-pagination",listCard:"antd-pro\\pages\\-admin\\-post-listCard",standardListForm:"antd-pro\\pages\\-admin\\-post-standardListForm",formResult:"antd-pro\\pages\\-admin\\-post-formResult"}}}]);